<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - DeskRinger</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Header -->
    <header class="admin-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">DeskRinger</div>
                <nav>
                    <ul class="nav-links">
                        <li><a href="/dashboard.html">Calls</a></li>
                        <li><a href="/settings.html" class="active">Settings</a></li>
                    </ul>
                </nav>
                <div class="user-menu">
                    <span id="business-name">Loading...</span>
                    <button onclick="logout()" class="btn btn-secondary" style="padding: 0.5rem 1rem;">Logout</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding-top: 3rem; padding-bottom: 3rem;">
        <div class="fade-in" style="max-width: 900px; margin: 0 auto;">
            <div style="margin-bottom: 3rem;">
                <h1 style="font-size: 2rem; margin-bottom: 0.5rem; color: var(--text-primary);">Settings</h1>
                <p style="color: var(--text-tertiary); font-size: 0.95rem;">Manage your business information and AI configuration</p>
            </div>

            <!-- Business Information Card -->
            <div class="card settings-card">
                <div class="settings-card-header">
                    <div>
                        <h2 style="margin: 0; font-size: 1.25rem;">Business Information</h2>
                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--text-tertiary);">Update your company details</p>
                    </div>
                </div>

                <div id="settings-message" class="alert" style="display: none;"></div>

                <form id="settings-form">
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="business-name-input" class="form-label">Business Name *</label>
                            <input type="text" id="business-name-input" name="business_name" required class="form-input">
                        </div>

                        <div class="form-field">
                            <label for="business-type" class="form-label">Business Type</label>
                            <select id="business-type" name="business_type" class="form-input">
                                <option value="">Select type...</option>
                                <option value="salon">Salon/Barbershop</option>
                                <option value="dental">Dental Office</option>
                                <option value="medical">Medical Practice</option>
                                <option value="gym">Gym/Fitness</option>
                                <option value="restaurant">Restaurant</option>
                                <option value="retail">Retail</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="form-field">
                            <label for="contact-name" class="form-label">Contact Name</label>
                            <input type="text" id="contact-name" name="contact_name" class="form-input">
                        </div>

                        <div class="form-field">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" id="phone" name="phone" class="form-input" placeholder="+1 (555) 123-4567">
                        </div>
                    </div>

                    <div class="form-divider"></div>

                    <div class="form-section-header">
                        <h3 style="margin: 0; font-size: 1rem;">Business Hours</h3>
                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--text-tertiary);">Set your operating hours for each day</p>
                    </div>

                    <div id="business-hours-container" style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <!-- Business hours will be dynamically added here -->
                    </div>

                    <div class="form-field" style="margin-top: 1rem;">
                        <label for="holiday-hours" class="form-label">Holiday Hours (Optional)</label>
                        <textarea id="holiday-hours" name="holiday_hours" rows="3" class="form-input"
                                  placeholder="e.g., Closed on Thanksgiving and Christmas. Open 10am-3pm on New Year's Day."></textarea>
                        <small class="form-help">Specify if you're open on holidays and any special hours</small>
                    </div>

                    <div class="form-divider"></div>

                    <div class="form-section-header">
                        <h3 style="margin: 0; font-size: 1rem;">Call Transfer</h3>
                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--text-tertiary);">Where should callers be transferred if needed?</p>
                    </div>

                    <div class="form-field">
                        <label for="forward-to-number" class="form-label">Transfer Phone Number *</label>
                        <input type="tel" id="forward-to-number" name="forward_to_number" class="form-input" placeholder="+1 (555) 123-4567" required>
                        <small class="form-help">The AI will transfer callers to this number if they request to speak with someone or if the AI can't answer their question</small>
                    </div>

                    <div class="form-divider"></div>

                    <div class="form-section-header">
                        <h3 style="margin: 0; font-size: 1rem;">AI Configuration</h3>
                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--text-tertiary);">Customize how your AI receptionist responds</p>
                    </div>

                    <div class="form-field">
                        <label for="greeting-message" class="form-label">Greeting Message</label>
                        <textarea id="greeting-message" name="greeting_message" rows="3" class="form-input"
                                  placeholder="Thank you for calling [Your Business]. How can I help you today?"></textarea>
                        <small class="form-help">The first thing callers will hear when the AI answers</small>
                    </div>

                    <div class="form-field">
                        <label for="services-offered" class="form-label">Services Offered</label>
                        <textarea id="services-offered" name="services_offered" rows="4" class="form-input"
                                  placeholder="Haircuts, styling, coloring, highlights, special event styling"></textarea>
                        <small class="form-help">List the services your business provides (one per line or comma-separated)</small>
                    </div>

                    <div class="form-field">
                        <label class="form-label">Appointment/Request Handling</label>
                        <div style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 0.5rem;">
                            <label class="radio-option">
                                <input type="radio" name="appointment_handling" value="collect_details" checked>
                                <span><strong>Collect caller details</strong> - Get name, phone, requested time, delivery address (if applicable), and description of needs</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="appointment_handling" value="callback">
                                <span><strong>Take info for callback</strong> - Get name and phone, promise someone will call back</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="appointment_handling" value="transfer">
                                <span><strong>Transfer to staff</strong> - Connect caller to staff member immediately</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="appointment_handling" value="booking_link">
                                <span><strong>Provide booking link</strong> - Share online booking website or instructions</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="appointment_handling" value="call_back_later">
                                <span><strong>Call back during hours</strong> - Ask them to call back during business hours</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-field">
                        <label for="pricing-info" class="form-label">Pricing Information (Optional)</label>
                        <textarea id="pricing-info" name="pricing_info" rows="3" class="form-input"
                                  placeholder="Haircuts start at $45, coloring starts at $85"></textarea>
                        <small class="form-help">Should the AI share pricing? If yes, provide the details here</small>
                    </div>

                    <div class="form-field">
                        <label class="form-label">Common Questions & Answers</label>
                        <div id="faqs-container" style="display: flex; flex-direction: column; gap: 1rem;">
                            <!-- FAQs will be dynamically added here -->
                        </div>
                        <button type="button" onclick="addFAQ()" class="btn btn-secondary" style="margin-top: 0.75rem;">
                            + Add Question & Answer
                        </button>
                        <small class="form-help">Pre-programmed answers to questions callers frequently ask</small>
                    </div>

                    <div class="form-field">
                        <label for="special-instructions" class="form-label">Additional Instructions (Optional)</label>
                        <textarea id="special-instructions" name="special_instructions" rows="4" class="form-input"
                                  placeholder="Emergency protocols, specific staff to mention, holiday hours, etc."></textarea>
                        <small class="form-help">Any other specific instructions or information for the AI</small>
                    </div>

                    <div style="display: flex; justify-content: flex-end; margin-top: 2rem;">
                        <button type="submit" class="btn btn-primary" id="save-settings-btn" style="min-width: 150px;">
                            Save Changes
                        </button>
                    </div>
                </form>
            </div>

            <!-- DeskRinger Number Card -->
            <div class="card settings-card">
                <div class="settings-card-header">
                    <div>
                        <h2 style="margin: 0; font-size: 1.25rem;">Your DeskRinger Number</h2>
                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--text-tertiary);">This is the number customers call to reach your AI receptionist</p>
                    </div>
                </div>
                <div class="deskringer-number-display">
                    <div id="deskringer-number" class="deskringer-number">Loading...</div>
                    <p style="color: var(--text-tertiary); font-size: 0.875rem; margin: 1rem 0 0 0;">Forward this number to customers or use it for your business listings</p>
                </div>
            </div>

            <!-- Change Password Card -->
            <div class="card settings-card">
                <div class="settings-card-header">
                    <div>
                        <h2 style="margin: 0; font-size: 1.25rem;">Change Password</h2>
                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--text-tertiary);">Update your portal login password</p>
                    </div>
                </div>

                <div id="password-message" class="alert" style="display: none;"></div>

                <form id="change-password-form" style="max-width: 500px;">
                    <div class="form-field">
                        <label for="current-password" class="form-label">Current Password</label>
                        <input type="password" id="current-password" name="current-password" required class="form-input">
                    </div>

                    <div class="form-field">
                        <label for="new-password" class="form-label">New Password</label>
                        <input type="password" id="new-password" name="new-password" required class="form-input">
                        <small class="form-help">Minimum 8 characters</small>
                    </div>

                    <div class="form-field">
                        <label for="confirm-password" class="form-label">Confirm New Password</label>
                        <input type="password" id="confirm-password" name="confirm-password" required class="form-input">
                    </div>

                    <div style="display: flex; justify-content: flex-end; margin-top: 2rem;">
                        <button type="submit" class="btn btn-primary" id="change-password-btn" style="min-width: 150px;">
                            Change Password
                        </button>
                    </div>
                </form>
            </div>

            <!-- Appearance Settings Card -->
            <div class="card settings-card">
                <div class="settings-card-header">
                    <div>
                        <h2 style="margin: 0; font-size: 1.25rem;">Appearance</h2>
                        <p style="margin: 0.25rem 0 0 0; font-size: 0.875rem; color: var(--text-tertiary);">Choose your preferred theme</p>
                    </div>
                </div>

                <div style="max-width: 500px;">
                    <div style="display: flex; gap: 1rem;">
                        <label class="theme-option" style="flex: 1; padding: 1rem; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                            <input type="radio" name="theme" value="light" id="theme-light" style="margin-right: 0.5rem;">
                            <span style="font-weight: 500;">Light Mode</span>
                        </label>
                        <label class="theme-option" style="flex: 1; padding: 1rem; border: 2px solid var(--border-color); border-radius: 8px; cursor: pointer; transition: all 0.2s;">
                            <input type="radio" name="theme" value="dark" id="theme-dark" style="margin-right: 0.5rem;">
                            <span style="font-weight: 500;">Dark Mode</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/theme.js"></script>
    <script>
        // Require authentication
        requireAuth();

        let customerData = null;
        let faqs = [];
        let businessHours = {
            monday: { open: '09:00', close: '17:00', closed: false },
            tuesday: { open: '09:00', close: '17:00', closed: false },
            wednesday: { open: '09:00', close: '17:00', closed: false },
            thursday: { open: '09:00', close: '17:00', closed: false },
            friday: { open: '09:00', close: '17:00', closed: false },
            saturday: { open: '09:00', close: '17:00', closed: true },
            sunday: { open: '09:00', close: '17:00', closed: true }
        };

        // Load customer data
        async function loadCustomerData() {
            try {
                customerData = await CustomerAPI.getMe();
                document.getElementById('business-name').textContent = customerData.business_name;

                // Populate form - Business info
                document.getElementById('business-name-input').value = customerData.business_name || '';
                document.getElementById('contact-name').value = customerData.contact_name || '';
                document.getElementById('phone').value = customerData.phone || '';
                document.getElementById('business-type').value = customerData.business_type || '';
                document.getElementById('deskringer-number').textContent = customerData.deskringer_number || 'Not assigned';

                // Business hours and transfer
                if (customerData.business_hours) {
                    businessHours = customerData.business_hours;
                }
                renderBusinessHours();
                document.getElementById('holiday-hours').value = customerData.holiday_hours || '';
                document.getElementById('forward-to-number').value = customerData.forward_to_number || '';

                // Populate form - AI config
                document.getElementById('greeting-message').value = customerData.greeting_message || '';
                document.getElementById('services-offered').value = customerData.services_offered || '';
                document.getElementById('pricing-info').value = customerData.pricing_info || '';
                document.getElementById('special-instructions').value = customerData.special_instructions || '';

                // Set appointment handling radio
                const appointmentHandling = customerData.appointment_handling || 'collect_details';
                const radio = document.querySelector(`input[name="appointment_handling"][value="${appointmentHandling}"]`);
                if (radio) radio.checked = true;

                // Load FAQs
                faqs = customerData.faqs || [];
                renderFAQs();

            } catch (error) {
                console.error('Error loading customer data:', error);
                if (error.message.includes('401') || error.message.includes('token')) {
                    logout();
                }
            }
        }

        // Business Hours Management
        function renderBusinessHours() {
            const container = document.getElementById('business-hours-container');
            const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];

            container.innerHTML = days.map(day => {
                const hours = businessHours[day] || { open: '09:00', close: '17:00', closed: false };
                return `
                    <div class="hours-row">
                        <div class="hours-day">${day.charAt(0).toUpperCase() + day.slice(1)}</div>
                        <label class="hours-checkbox">
                            <input type="checkbox" ${hours.closed ? 'checked' : ''}
                                   onchange="toggleDayClosed('${day}', this.checked)">
                            <span>Closed</span>
                        </label>
                        <div class="hours-times" ${hours.closed ? 'style="opacity: 0.4; pointer-events: none;"' : ''} id="${day}-times">
                            <input type="time" class="form-input" style="padding: 0.5rem 0.75rem;"
                                   value="${hours.open || '09:00'}"
                                   onchange="updateHours('${day}', 'open', this.value)">
                            <span style="color: var(--text-tertiary); font-weight: 600;">to</span>
                            <input type="time" class="form-input" style="padding: 0.5rem 0.75rem;"
                                   value="${hours.close || '17:00'}"
                                   onchange="updateHours('${day}', 'close', this.value)">
                        </div>
                    </div>
                `;
            }).join('');
        }

        function toggleDayClosed(day, isClosed) {
            businessHours[day].closed = isClosed;
            const timesDiv = document.getElementById(`${day}-times`);
            if (isClosed) {
                timesDiv.style.opacity = '0.4';
                timesDiv.style.pointerEvents = 'none';
            } else {
                timesDiv.style.opacity = '1';
                timesDiv.style.pointerEvents = 'auto';
            }
        }

        function updateHours(day, field, value) {
            businessHours[day][field] = value;
        }

        // FAQ Management
        function renderFAQs() {
            const container = document.getElementById('faqs-container');
            if (faqs.length === 0) {
                container.innerHTML = '<p style="color: var(--text-tertiary); font-size: 0.875rem; font-style: italic;">No questions added yet. Click "Add Question & Answer" below to get started.</p>';
                return;
            }

            container.innerHTML = faqs.map((faq, index) => `
                <div class="faq-item" style="border: 2px solid var(--border-color); border-radius: 8px; padding: 1rem; background: var(--bg-tertiary);">
                    <div style="display: flex; justify-content: space-between; align-items: start; gap: 1rem; margin-bottom: 0.75rem;">
                        <strong style="color: var(--text-primary);">Q&A #${index + 1}</strong>
                        <button type="button" onclick="removeFAQ(${index})" class="btn btn-sm" style="background: #dc2626; color: white; padding: 0.25rem 0.75rem;">Remove</button>
                    </div>
                    <input type="text" class="form-input" style="margin-bottom: 0.75rem;" placeholder="Question (e.g., Do you take walk-ins?)" value="${faq.question || ''}" onchange="updateFAQ(${index}, 'question', this.value)">
                    <textarea class="form-input" rows="2" placeholder="Answer (e.g., Yes, we accept walk-ins based on availability)" onchange="updateFAQ(${index}, 'answer', this.value)">${faq.answer || ''}</textarea>
                </div>
            `).join('');
        }

        function addFAQ() {
            faqs.push({ question: '', answer: '' });
            renderFAQs();
        }

        function removeFAQ(index) {
            faqs.splice(index, 1);
            renderFAQs();
        }

        function updateFAQ(index, field, value) {
            faqs[index][field] = value;
        }

        // Handle settings form submission
        document.getElementById('settings-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(e.target);
            const settings = Object.fromEntries(formData.entries());

            // Add structured data
            settings.faqs = faqs;
            settings.business_hours = businessHours;

            const messageDiv = document.getElementById('settings-message');
            const submitBtn = document.getElementById('save-settings-btn');

            messageDiv.style.display = 'none';

            try {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Saving...';

                await CustomerAPI.updateSettings(settings);

                messageDiv.textContent = 'Settings saved successfully! Your AI receptionist has been updated.';
                messageDiv.style.display = 'block';
                messageDiv.style.background = '#14532d';
                messageDiv.style.color = '#86efac';

                // Reload data
                await loadCustomerData();

            } catch (error) {
                console.error('Error saving settings:', error);
                messageDiv.textContent = error.message || 'Failed to save settings';
                messageDiv.style.display = 'block';
                messageDiv.style.background = '#7f1d1d';
                messageDiv.style.color = '#fca5a5';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Save Changes';
            }
        });

        // Handle password change form submission
        document.getElementById('change-password-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            const messageDiv = document.getElementById('password-message');
            const submitBtn = document.getElementById('change-password-btn');

            messageDiv.style.display = 'none';

            if (newPassword !== confirmPassword) {
                messageDiv.textContent = 'New passwords do not match';
                messageDiv.style.display = 'block';
                messageDiv.style.background = '#7f1d1d';
                messageDiv.style.color = '#fca5a5';
                return;
            }

            if (newPassword.length < 8) {
                messageDiv.textContent = 'Password must be at least 8 characters';
                messageDiv.style.display = 'block';
                messageDiv.style.background = '#7f1d1d';
                messageDiv.style.color = '#fca5a5';
                return;
            }

            try {
                submitBtn.disabled = true;
                submitBtn.textContent = 'Changing Password...';

                await CustomerAPI.changePassword(currentPassword, newPassword);

                messageDiv.textContent = 'Password changed successfully!';
                messageDiv.style.display = 'block';
                messageDiv.style.background = '#14532d';
                messageDiv.style.color = '#86efac';

                document.getElementById('change-password-form').reset();

            } catch (error) {
                console.error('Error changing password:', error);
                messageDiv.textContent = error.message || 'Failed to change password';
                messageDiv.style.display = 'block';
                messageDiv.style.background = '#7f1d1d';
                messageDiv.style.color = '#fca5a5';
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = 'Change Password';
            }
        });

        // Load data on page load
        loadCustomerData();

        // Initialize theme toggle
        function initThemeToggle() {
            const currentTheme = ThemeManager.getCurrentTheme();
            const lightRadio = document.getElementById('theme-light');
            const darkRadio = document.getElementById('theme-dark');

            // Set the correct radio button
            if (currentTheme === 'dark') {
                darkRadio.checked = true;
            } else {
                lightRadio.checked = true;
            }

            // Add event listeners
            lightRadio.addEventListener('change', () => {
                if (lightRadio.checked) {
                    ThemeManager.setTheme('light');
                }
            });

            darkRadio.addEventListener('change', () => {
                if (darkRadio.checked) {
                    ThemeManager.setTheme('dark');
                }
            });

            // Add visual feedback on selected option
            function updateThemeOptionStyles() {
                const currentTheme = ThemeManager.getCurrentTheme();
                const lightLabel = lightRadio.closest('.theme-option');
                const darkLabel = darkRadio.closest('.theme-option');

                if (currentTheme === 'dark') {
                    darkLabel.style.borderColor = 'var(--accent-primary)';
                    darkLabel.style.background = 'var(--bg-tertiary)';
                    lightLabel.style.borderColor = 'var(--border-color)';
                    lightLabel.style.background = 'transparent';
                } else {
                    lightLabel.style.borderColor = 'var(--accent-primary)';
                    lightLabel.style.background = 'var(--bg-tertiary)';
                    darkLabel.style.borderColor = 'var(--border-color)';
                    darkLabel.style.background = 'transparent';
                }
            }

            updateThemeOptionStyles();
            lightRadio.addEventListener('change', updateThemeOptionStyles);
            darkRadio.addEventListener('change', updateThemeOptionStyles);
        }

        // Initialize theme toggle after page load
        initThemeToggle();
    </script>

    <style>
        .settings-card {
            margin-bottom: 2rem;
            transition: all 0.2s;
        }

        .settings-card:hover {
            border-color: var(--border-hover);
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .settings-card-header {
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 2rem;
        }

        .settings-card-header h2 {
            color: var(--text-primary);
            font-size: 1.25rem;
        }

        .settings-card-header p {
            color: var(--text-tertiary);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .form-field {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
            letter-spacing: 0.01em;
        }

        .form-input {
            width: 100%;
            padding: 0.875rem 1rem;
            border-radius: 8px;
            border: 2px solid var(--border-color);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 0.9375rem;
            font-family: inherit;
            transition: all 0.2s;
        }

        .form-input:hover {
            border-color: var(--border-hover);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            background: var(--bg-secondary);
            box-shadow: 0 0 0 4px var(--accent-light);
        }

        .form-input::placeholder {
            color: var(--text-muted);
        }

        textarea.form-input {
            resize: vertical;
            line-height: 1.6;
        }

        select.form-input {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%23475569' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            padding-right: 2.5rem;
        }

        .form-help {
            display: block;
            color: var(--text-muted);
            font-size: 0.8125rem;
            margin-top: 0.5rem;
            line-height: 1.5;
        }

        .form-divider {
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--border-color), transparent);
            margin: 2.5rem 0;
        }

        .form-section-header {
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }

        .form-section-header h3 {
            color: var(--text-primary);
        }

        .form-section-header p {
            color: var(--text-tertiary);
        }

        .alert {
            padding: 1rem 1.25rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            border-left: 4px solid;
        }

        .deskringer-number-display {
            background: linear-gradient(135deg, var(--accent-light) 0%, var(--bg-tertiary) 100%);
            padding: 2.5rem;
            border-radius: 12px;
            text-align: center;
            border: 2px solid var(--border-color);
        }

        .deskringer-number {
            font-size: 2.75rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: 0.05em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 0.5rem;
            font-family: 'Courier New', monospace;
        }

        /* Button enhancement */
        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Radio options styling */
        .radio-option {
            display: flex;
            align-items: start;
            gap: 0.75rem;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .radio-option:hover {
            border-color: var(--accent-primary);
            background: var(--bg-tertiary);
        }

        .radio-option input[type="radio"] {
            width: 20px;
            height: 20px;
            margin-top: 0.15rem;
            cursor: pointer;
            flex-shrink: 0;
        }

        .radio-option input[type="radio"]:checked {
            accent-color: var(--accent-primary);
        }

        .radio-option:has(input[type="radio"]:checked) {
            border-color: var(--accent-primary);
            background: var(--accent-light);
        }

        .radio-option span {
            color: var(--text-secondary);
            font-size: 0.9375rem;
            line-height: 1.5;
        }

        /* Business hours styling */
        .hours-row {
            display: grid;
            grid-template-columns: 120px 120px 1fr;
            gap: 1rem;
            align-items: center;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
        }

        .hours-day {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9375rem;
        }

        .hours-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .hours-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .hours-times {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: opacity 0.2s;
        }

        .hours-times input[type="time"] {
            flex: 1;
            max-width: 140px;
        }
    </style>
</body>
</html>
